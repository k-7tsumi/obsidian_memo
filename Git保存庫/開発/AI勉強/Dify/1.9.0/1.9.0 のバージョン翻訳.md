Dify v1.9.0ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ( https://github.com/langgenius/dify/releases/tag/1.9.0 )ã‚’ç¿»è¨³ã—ãŸã‚‚ã®ã§ã™ã€‚

### 1.9.0 â€“ çŸ¥è­˜ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å¼·åŒ–

#### ğŸš€ ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

Dify 1.9.0ã§ã¯ã€2ã¤ã®ä¸»è¦ãªæ–°æ©Ÿèƒ½ã‚’å°å…¥ã—ã¾ã™ï¼šãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ©ãƒ•ã‚¨ãƒ³ã‚¸ãƒ³ã§ã™ã€‚
ãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€çŸ¥è­˜ã®å–ã‚Šè¾¼ã¿ã¨å‡¦ç†ã®ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚Œæ‹¡å¼µå¯èƒ½ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚ä¸€æ–¹ã€ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ©ãƒ•ã‚¨ãƒ³ã‚¸ãƒ³ã¯ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œã‚’ã‚ˆã‚Šå …ç‰¢ã‹ã¤åˆ¶å¾¡å¯èƒ½ã«ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€AIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ã¨ãƒ‡ãƒãƒƒã‚°ãŒã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ç¢ºä¿¡ã—ã¦ãŠã‚Šã€çš†æ§˜ã®ã”åˆ©ç”¨ä½“é¨“ã‚’é€šã˜ã¦ç¶™ç¶šçš„ãªæ”¹å–„ã‚’å›³ã£ã¦ã¾ã„ã‚Šã¾ã™ã€‚

### ğŸ“šãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

#### âœ¨ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

çŸ¥è­˜ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‘ã‘ã®å…¨ãæ–°ã—ã„ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚ˆã‚Šã€æ–‡æ›¸å‡¦ç†ã®è¨­è¨ˆã¨å®Ÿè¡Œæ–¹æ³•ã‚’å†æ§‹ç¯‰ã™ã‚‹æ ¹æœ¬çš„ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å°å…¥ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ˆã‚Šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒæŸ”è»Ÿãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿç¾ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å„æ®µéšã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã§å…¥æ‰‹å¯èƒ½ãªå¤šæ§˜ãªå¼·åŠ›ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚Šå¼·åŒ–ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚„å‡¦ç†ãƒ„ãƒ¼ãƒ«ã‚’æŸ”è»Ÿã«çµ±åˆã§ãã¾ã™ã€‚ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã€é©å¿œæ€§ã€ç²¾åº¦ã«å¯¾ã™ã‚‹ä¼æ¥­ã®é«˜ã¾ã‚‹è¦æ±‚ã‚’æº€ãŸã™ã€é«˜åº¦ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸãƒ‰ãƒ¡ã‚¤ãƒ³ç‰¹åŒ–å‹RAGã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚

#### â“ãªãœãã‚ŒãŒå¿…è¦ãªã®ã‹ï¼Ÿ

ã“ã‚Œã¾ã§ã€Difyã®RAGãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å®Ÿä¸–ç•Œã§ã®å°å…¥ã«ãŠã„ã¦ã€ä¸æ­£ç¢ºãªçŸ¥è­˜æ¤œç´¢ã‚„æƒ…å ±æå¤±ã‹ã‚‰ã€ãƒ‡ãƒ¼ã‚¿çµ±åˆã‚„æ‹¡å¼µæ€§ã®åˆ¶é™ã«è‡³ã‚‹ã¾ã§ã€æŒç¶šçš„ãªèª²é¡Œã«ç›´é¢ã—ã¦ãã¾ã—ãŸã€‚ä¸»ãªèª²é¡Œç‚¹ã¨ã—ã¦ã¯ä»¥ä¸‹ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ï¼š

- ğŸ”— ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®çµ±åˆãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹ 
- ğŸ–¼ï¸ è¡¨ã‚„ç”»åƒãªã©ã®é‡è¦ãªè¦ç´ ãŒæ¬ è½ã—ã¦ã„ã‚‹ 
- âœ‚ï¸ ãƒãƒ£ãƒ³ã‚¯åŒ–ã®çµæœãŒæœ€é©ã§ã¯ãªã„

ã“ã‚Œã‚‰ã™ã¹ã¦ãŒå›ç­”å“è³ªã®ä½ä¸‹ã‚’æ‹›ãã€ãƒ¢ãƒ‡ãƒ«ã®å…¨ä½“çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é˜»å®³ã—ã¾ã™ã€‚

ã“ã‚Œã«å¯¾å¿œã™ã‚‹ãŸã‚ã€Difyã«ãŠã‘ã‚‹RAGã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¼ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã—ã¦å†æ§‹ç¯‰ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–‹ç™ºè€…ã€ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚¿ãƒ¼ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã¯ã€ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ã‹ã‚‰ãƒãƒ£ãƒ³ã‚¯ä¿å­˜ãƒ»æ¤œç´¢ã«è‡³ã‚‹ã¾ã§ã€ç‰¹å®šã®è¦ä»¶ã«åˆã‚ã›ãŸæ–‡æ›¸å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

#### ğŸ› ï¸ ã‚³ã‚¢æ©Ÿèƒ½

##### ğŸ§© ãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€æ–‡æ›¸å–ã‚Šè¾¼ã¿ã«ç‰¹åŒ–ã—ãŸè¦–è¦šçš„ãªãƒãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚è¤‡é›‘ãªæ–‡æ›¸å‡¦ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªæ–¹æ³•ã‚’æä¾›ã—ã€ãã‚ç´°ã‹ã„å¤‰æ›ã‚’å¯èƒ½ã«ã™ã‚‹ã¨ã¨ã‚‚ã«ã€ç”Ÿã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨æ§‹é€ åŒ–ã•ã‚Œæ¤œç´¢å¯èƒ½ãªçŸ¥è­˜ã‚’çµã³ã¤ã‘ã¾ã™ã€‚é–‹ç™ºè€…ã¯ãƒ‘ã‚ºãƒ«ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã‚ˆã†ã«æ®µéšçš„ã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã§ãã‚‹ãŸã‚ã€æ–‡æ›¸å‡¦ç†ã®ç›£è¦–ã‚„èª¿æ•´ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚

- âš¡ å…¬å¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ãã«å§‹ã‚ã‚‰ã‚Œã¾ã™
- ğŸ”„ DSL çµŒç”±ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŠã‚ˆã³å…±æœ‰ã§ãã€å†åˆ©ç”¨æ€§ã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™

##### ğŸ”Œ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ãƒ„ãƒ¼ãƒ«

å„ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ™ãƒ¼ã‚¹ã®å–ã‚Šè¾¼ã¿ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é€šã˜ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ–‡æ›¸ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒ–ã€ã‚¦ã‚§ãƒ–ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«çµ±åˆã§ãã¾ã™ã€‚é–‹ç™ºè€…ã¯æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ‹¡å¼µã§ãã‚‹ä¸€æ–¹ã€ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ãŒæ•°å¼ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã€ç”»åƒè§£æãªã©ã®ç‰¹æ®Šãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å‡¦ç†ã—ã€æ­£ç¢ºãªå–ã‚Šè¾¼ã¿ã¨æ§‹é€ åŒ–ã•ã‚ŒãŸè¡¨ç¾ã‚’ä¿è¨¼ã—ã¾ã™ã€‚

##### ğŸ§¾ æ–°ã—ã„ãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°æ‰‹æ³•

æ–°ã—ã„Q&Aãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€ä¸€èˆ¬ãƒ¢ãƒ¼ãƒ‰ã¨è¦ªå­ãƒ¢ãƒ¼ãƒ‰ã«åŠ ãˆã€Q&Aæ§‹é€ ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¤œç´¢ç²¾åº¦ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å®Œå…¨æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ã€ã‚ˆã‚Šå¤šãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

##### ğŸ–¼ï¸ ç”»åƒã®æŠ½å‡ºã¨æ¤œç´¢

è¤‡æ•°ã®å½¢å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰ç”»åƒã‚’æŠ½å‡ºã—ã€ãƒŠãƒ¬ãƒƒã‚¸ ãƒ™ãƒ¼ã‚¹ã« URL ã¨ã—ã¦ä¿å­˜ã—ã€ãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã®æ··åˆå‡ºåŠ›ã‚’æœ‰åŠ¹ã«ã—ã¦ã€LLM ã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã‚’æ”¹å–„ã—ã¾ã™ã€‚

##### ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ãƒ‡ãƒãƒƒã‚°ã®ã‚µãƒãƒ¼ãƒˆ

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å…¬é–‹ã™ã‚‹å‰ã«ã€æ¬¡ã®æ“ä½œã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

- â–¶ï¸ å˜ä¸€ã®ã‚¹ãƒ†ãƒƒãƒ—ã¾ãŸã¯ãƒãƒ¼ãƒ‰ã‚’å€‹åˆ¥ã«å®Ÿè¡Œã™ã‚‹
- ğŸ” ä¸­é–“å¤‰æ•°ã‚’è©³ç´°ã«æ¤œæŸ»ã™ã‚‹ 
- ğŸ‘€ å¤‰æ•°ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã§æ–‡å­—åˆ—å¤‰æ•°ã‚’ Markdown ã¨ã—ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ã‚‰ã‚†ã‚‹æ®µéšã§å®‰å…¨ãªåå¾©ã¨ãƒ‡ãƒãƒƒã‚°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

##### ğŸ”„ ãƒ¬ã‚¬ã‚·ãƒ¼ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ç§»è¡Œ

æ—¢å­˜ã®ãƒŠãƒ¬ãƒƒã‚¸ ãƒ™ãƒ¼ã‚¹ã‚’ 1 å›ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ Knowledge Pipeline ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«å¤‰æ›ã—ã€ã‚¹ãƒ ãƒ¼ã‚ºãªç§»è¡Œã¨ä¸‹ä½äº’æ›æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚

#### ğŸŒŸ ãªãœãã‚ŒãŒé‡è¦ãªã®ã‹

ãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€ãƒŠãƒ¬ãƒƒã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚’ã‚ˆã‚Šé€æ˜æ€§ãŒé«˜ãã€ãƒ‡ãƒãƒƒã‚°å¯èƒ½ã§ã€æ‹¡å¼µæ€§ã®é«˜ã„ã‚‚ã®ã«ã—ã¾ã™ã€‚ã“ã‚Œã¯æœ€çµ‚å½¢ã§ã¯ãªãã€ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«æ¤œç´¢ã€äººé–“ãŒé–¢ä¸ã™ã‚‹å”åƒã€ä¼æ¥­ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ã¨ã„ã£ãŸå°†æ¥ã®æ©Ÿèƒ½å¼·åŒ–ã®ãŸã‚ã®åŸºç›¤ã§ã™ã€‚çš†æ§˜ãŒã“ã‚Œã‚’ã©ã®ã‚ˆã†ã«æ´»ç”¨ã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å…±æœ‰ã•ã‚Œã‚‹ã‹æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ã€‚

### âš™ï¸ ã‚­ãƒ¥ãƒ¼é§†å‹•ã‚°ãƒ©ãƒ•ã‚¨ãƒ³ã‚¸ãƒ³

#### â“ ãªãœå¿…è¦ãªã®ã‹ï¼Ÿ

ã“ã‚Œã¾ã§ã€ä¸¦åˆ—åˆ†å²ã‚’å«ã‚€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è¨­è¨ˆã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã€‚
- ğŸŒ€ åˆ†å²çŠ¶æ…‹ã®ç®¡ç†ã¨ã‚¨ãƒ©ãƒ¼ã®å†ç¾ãŒå›°é›£ 
- âŒ ãƒ‡ãƒãƒƒã‚°æƒ…å ±ãŒä¸ååˆ†
- ğŸ§± æŸ”è»Ÿæ€§ã«æ¬ ã‘ã‚‹å›ºå®šçš„ãªå®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯

ã“ã‚Œã‚‰ã®å•é¡Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä½¿ã„å‹æ‰‹ãŒä½ä¸‹ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ã‚­ãƒ¥ãƒ¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’ä¸­å¿ƒã¨ã—ãŸå®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ã‚’å†è¨­è¨ˆã—ã€ä¸¦åˆ—ã‚¿ã‚¹ã‚¯ã®ç®¡ç†ã‚’æ”¹å–„ã—ã¾ã—ãŸã€‚

#### ğŸ› ï¸ ã‚³ã‚¢æ©Ÿèƒ½

##### ğŸ“‹ ã‚­ãƒ¥ãƒ¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«
ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã¯çµ±åˆã•ã‚ŒãŸã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Šã€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãŒä¾å­˜é–¢ä¿‚ã¨é †åºã‚’ç®¡ç†ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¸¦åˆ—å®Ÿè¡Œã«ãŠã‘ã‚‹ã‚¨ãƒ©ãƒ¼ãŒå‰Šæ¸›ã•ã‚Œã€ãƒˆãƒãƒ­ã‚¸ãŒã‚ˆã‚Šç›´æ„Ÿçš„ã«ãªã‚Šã¾ã™ã€‚

##### ğŸ¯ æŸ”è»Ÿãªå®Ÿè¡Œé–‹å§‹ãƒã‚¤ãƒ³ãƒˆ
å®Ÿè¡Œã¯ã©ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ã§ã‚‚é–‹å§‹ã§ãã€éƒ¨åˆ†å®Ÿè¡Œã€å†é–‹ã€ã‚µãƒ–ã‚°ãƒ©ãƒ•å‘¼ã³å‡ºã—ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

##### ğŸŒŠ ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
æ–°ã—ã„ **ResponseCoordinator** ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³ã”ã¨ã® LLM ç”Ÿæˆã‚„é•·æ™‚é–“å®Ÿè¡Œã‚¿ã‚¹ã‚¯ã‹ã‚‰ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚ŒãŸçµæœãªã©ã€è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã‚’å‡¦ç†ã—ã¾ã™ã€‚

##### ğŸ•¹ï¸ ã‚³ãƒãƒ³ãƒ‰ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
**CommandProcessor** ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å®Ÿè¡Œä¸­ã«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ä¸€æ™‚åœæ­¢ã€å†é–‹ã€ã¾ãŸã¯çµ‚äº†ã§ãã‚‹ãŸã‚ã€å¤–éƒ¨åˆ¶å¾¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

##### ğŸ§© ã‚°ãƒ©ãƒ•ã‚¨ãƒ³ã‚¸ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼
ã‚³ã‚¢ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã‚¨ãƒ³ã‚¸ãƒ³ã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã§ãã‚‹æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚çŠ¶æ…‹ã®ç›£è¦–ã€ã‚³ãƒãƒ³ãƒ‰ã®é€ä¿¡ã€ã‚«ã‚¹ã‚¿ãƒ ç›£è¦–ã®ã‚µãƒãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚

#### Quickstart

1. **å‰ææ¡ä»¶**
    - Dify ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.9.0 ä»¥ä¸Š 
2. **æœ‰åŠ¹ã«ã™ã‚‹æ–¹æ³•**
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã£ã¦ãŠã‚Šã€è¿½åŠ ã®è¨­å®šã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ 
   - ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰: DebugLoggingLayer ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€DEBUG=true ã‚’è¨­å®šã—ã¾ã™ã€‚
- å®Ÿè¡Œåˆ¶é™ï¼š
	- `WORKFLOW_MAX_EXECUTION_STEPS=500`
	- `WORKFLOW_MAX_EXECUTION_TIME=1200`
	- `WORKFLOW_CALL_MAX_DEPTH=10`
- ãƒ¯ãƒ¼ã‚«ãƒ¼æ§‹æˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:
	-  `WORKFLOW_MIN_WORKERS=1`
	- `WORKFLOW_MAX_WORKERS=10`
	- `WORKFLOW_SCALE_UP_THRESHOLD=3`
	- `WORKFLOW_SCALE_DOWN_IDLE_TIME=30`
- ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚

#### ã‚ˆã‚Šåˆ¶å¾¡å¯èƒ½ãªä¸¦åˆ—åˆ†å²

```
å®Ÿè¡Œãƒ•ãƒ­ãƒ¼:

é–‹å§‹ â”€â†’ çµ±åˆã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ â”€â†’ ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ¼ãƒ«ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°
                â”œâ”€â†’ ãƒ–ãƒ©ãƒ³ãƒ1ã®å®Ÿè¡Œ
                â””â”€â†’ ãƒ–ãƒ©ãƒ³ãƒ2ã®å®Ÿè¡Œ
                        â†“
                    ã‚¢ã‚°ãƒªã‚²ãƒ¼ã‚¿ãƒ¼
                        â†“
                       çµ‚äº†

æ”¹å–„ç‚¹:
1. ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã¯ã€Dispatcher ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã‚‹å˜ä¸€ã®ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Šã¾ã™ã€‚ 
2. ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ¼ãƒ«ã¯è² è·ã«å¿œã˜ã¦è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã—ã¾ã™ã€‚ 
3. ResponseCoordinator ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã‚’ç®¡ç†ã—ã€æ­£ã—ã„é †åºã‚’ç¢ºä¿ã—ã¾ã™ã€‚
```

#### ä¾‹: ã‚³ãƒãƒ³ãƒ‰ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

```
from core.workflow.graph_engine.manager import GraphEngineManager

# åœæ­¢ã‚³ãƒãƒ³ãƒ‰ã‚’é€ä¿¡ã™ã‚‹
GraphEngineManager.send_stop_command(
    task_id="workflow_task_123",
    reason="Emergency stop: resource limit exceeded"
)
```

Note : ä¸€æ™‚åœæ­¢/å†é–‹æ©Ÿèƒ½ã¯å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

#### ä¾‹: GraphEngineLayer

[GraphEngineLayer ä¾‹](https://github.com/langgenius/dify/blob/feat/queue-based-graph-engine/api/core/workflow/graph_engine/layers/debug_logging.py)

### ã‚ˆãã‚ã‚‹è³ªå•

1. **ã“ã®ãƒªãƒªãƒ¼ã‚¹ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é‡ç‚¹ã‚’ç½®ã„ã¦ã„ã¾ã™ã‹?**
   ã„ã„ãˆã€‚ä¸¦åˆ—åˆ†å²ã®å®‰å®šæ€§ã€æ˜ç¢ºã•ã€æ­£ç¢ºæ€§ã«é‡ç‚¹ãŒç½®ã‹ã‚Œã¦ãŠã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Šã¯å‰¯æ¬¡çš„ãªãƒ¡ãƒªãƒƒãƒˆã§ã™ã€‚
2. **ã©ã®ã‚ˆã†ãªã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã§ãã¾ã™ã‹?**
	 ã‚°ãƒ©ãƒ•ãƒ¬ãƒ™ãƒ«: GraphRunStartedEventã€GraphRunSucceededEventã€GraphRunFailedEventã€GraphRunAbortedEvent 
	 ãƒãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«: NodeRunStartedEventã€NodeRunSucceededEventã€NodeRunFailedEventã€NodeRunRetryEvent
	 ã‚³ãƒ³ãƒ†ãƒŠãƒãƒ¼ãƒ‰: IterationRunStartedEventã€IterationRunNextEventã€IterationRunSucceededEventã€LoopRunStartedEventã€LoopRunNextEventã€LoopRunSucceededEvent 
	 ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›: NodeRunStreamChunkEvent
3. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã‚’ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹?** 
   - è©³ç´°ãªãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€DEBUG=true ã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„ã€‚
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜éŒ²ã™ã‚‹ã«ã¯ã€DebugLoggingLayer ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
   - GraphEngineLayer ã‚’ä»‹ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ç›£è¦–ã‚’è¿½åŠ ã—ã¾ã™ã€‚

### ä»Šå¾Œã®è¨ˆç”»
ã“ã®ãƒªãƒªãƒ¼ã‚¹ã¯ã¾ã å§‹ã¾ã‚Šã«éãã¾ã›ã‚“ã€‚ä»Šå¾Œã®æ”¹å–„ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ï¼š

- **ãƒ‡ãƒãƒƒã‚° ãƒ„ãƒ¼ãƒ«**: å®Ÿè¡ŒçŠ¶æ…‹ã¨å¤‰æ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã™ã‚‹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã€‚
- **ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°**ï¼šå±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°æˆ¦ç•¥ã‚’æœ€é©åŒ–ã—ã¾ã™ã€‚ 
- **ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã‚µãƒãƒ¼ãƒˆ**ï¼šä¸€æ™‚åœæ­¢/å†é–‹ã€ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚
- **äººé–“ãŒé–¢ä¸ã™ã‚‹**: å®Ÿè¡Œä¸­ã«äººé–“ã®ä»‹å…¥ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
- **ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«åŸ‹ã‚è¾¼ã¿**: ãƒ†ã‚­ã‚¹ãƒˆä»¥å¤–ã®è±Šå¯Œãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ã‚¿ã‚¤ãƒ—ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ã‚ˆã‚Šå®Ÿç”¨çš„ãªã‚‚ã®ã«ã™ã‚‹ãŸã‚ã«ã€çš†æ§˜ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨ã”çµŒé¨“ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚

### ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰

> **é‡è¦**
> ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã€æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹èªè¨¼æƒ…å ±ã‚’å¤‰æ›ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ç§»è¡Œæ‰‹é †ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æ‰‹é †ã¯ã€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã®äº’æ›æ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚

```
uv run flask transform-datasource-credentials
```

#### Docker Compose ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

1. ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸ docker-compose YAML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã™ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

```
cd docker
cp docker-compose.yaml docker-compose.yaml.$(date +%s).bak
```

2. ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹

```
git checkout 1.9.0
git pull origin 1.9.0
```

3. ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã—ã¾ã™ã€‚dockerãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```
docker compose down
```

4. ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

```
tar -cvf volumes-$(date +%s).tgz volumes
```

5. ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹

```
docker compose up -d
```

6. ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•å¾Œã«ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œã™ã‚‹

```
docker exec -it docker-api-1 uv run flask transform-datasource-credentials
```

#### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å±•é–‹

1. API ã‚µãƒ¼ãƒãƒ¼ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã€ãŠã‚ˆã³ Web ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã—ã¾ã™ã€‚
2. ãƒªãƒªãƒ¼ã‚¹ ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã¾ã™ã€‚
```
git checkout 1.9.0
```

3. Python ã®ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°ã—ã¾ã™ã€‚
```
cd api
uv sync
```
4. æ¬¡ã«ã€ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```
uv run flask db upgrade
uv run flask transform-datasource-credentials
```

> **é‡è¦** 
> ç¾åœ¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ v2.0.0-beta.1 ã¾ãŸã¯ v2.0.0-beta.2 ã‚’ã”åˆ©ç”¨ã®å ´åˆã¯ã€ä»¥ä¸‹ã®ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
> **[è­¦å‘Š] ã“ã‚Œã¯ç ´å£Šçš„ãªæ“ä½œã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã¾ã™ã€‚**
> ã“ã®ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚Šã€æ¬¡ã®ãƒ‡ãƒ¼ã‚¿ãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚
> - æ—¢å­˜ã®ã™ã¹ã¦ã®ãƒŠãƒ¬ãƒƒã‚¸ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
> - é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆèªè¨¼æƒ…å ±
> ç¶šè¡Œã™ã‚‹å‰ã«ã€å¿…è¦ãªæƒ…å ±ãŒã™ã¹ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```
# Difyç’°å¢ƒã®å ´åˆ:`v2.0.0-beta.1` ã¾ãŸã¯ `v2.0.0-beta.2`
uv run flask db downgrade cf7c38a32b2d  

# Difyç’°å¢ƒï¼š`v1.9.0`
uv run flask db upgrade
uv run flask transform-datasource-credentials
```

5. æœ€å¾Œã«ã€API ã‚µãƒ¼ãƒãƒ¼ã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã€Web ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ã‚µãƒ¼ãƒãƒ¼ã‚’å†åº¦å®Ÿè¡Œã—ã¾ã™ã€‚

â€» What's Changedã¯å‰²æ„›