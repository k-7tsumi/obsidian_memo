---
kindle-sync:
  bookId: '58144'
  title: 現場で活用するためのＡＩエージェント実践入門 (ＫＳ情報科学専門書)
  author: 太田真人、宮脇峻平、西見公宏、後藤勇輝、阿田木勇八
  asin: B0FM3QJ2DP
  lastAnnotatedDate: '2025-10-08'
  bookImageUrl: 'https://m.media-amazon.com/images/I/81trDMAhqgL._SY160.jpg'
  highlightsCount: 63
---
# 現場で活用するためのＡＩエージェント実践入門
## Metadata
* Author: [太田真人、宮脇峻平、西見公宏、後藤勇輝、阿田木勇八](https://www.amazon.comundefined)
* ASIN: B0FM3QJ2DP
* Reference: https://www.amazon.com/dp/B0FM3QJ2DP
* [Kindle link](kindle://book?action=open&asin=B0FM3QJ2DP)

## Highlights
この時期に海外のベンチャー企業は盛り上がり、さまざまなハッカソンやイベントが開催され、初期構想のAIエージェントを自己改良し、さまざまな応用（市場調査、コンテンツ作成、プロジェクト管理、予定表管理、登録処理など）で検証がされました。 　しかし実際には残念な結果になることが多かったです。理由は以下です。 ■ 費用がかかる、時間がかかる ■ タスクが終わらない、途中で失敗する、止まる ■ ChatGPTに入力できるトークン数が足りない ■ AIエージェントのコードが複雑でカスタマイズ開発が難しい — location: [319](kindle://book?action=open&asin=B0FM3QJ2DP&location=319) ^ref-25142

---
プロフィール（Profile） — location: [756](kindle://book?action=open&asin=B0FM3QJ2DP&location=756) ^ref-22193

---
プロフィールとは — location: [766](kindle://book?action=open&asin=B0FM3QJ2DP&location=766) ^ref-24181

---
なぜプロフィールを設定するのでしょうか — location: [770](kindle://book?action=open&asin=B0FM3QJ2DP&location=770) ^ref-41381

---
どのようなプロフィールがあるのでしょうか — location: [781](kindle://book?action=open&asin=B0FM3QJ2DP&location=781) ^ref-1045

---
プロフィールに用いる代表的なペルソナ — location: [785](kindle://book?action=open&asin=B0FM3QJ2DP&location=785) ^ref-16414

---
どのような用途でペルソナを利用するのでしょうか — location: [798](kindle://book?action=open&asin=B0FM3QJ2DP&location=798) ^ref-20346

---
役割の異なるエージェントが協力して複雑な問題を解決 — location: [810](kindle://book?action=open&asin=B0FM3QJ2DP&location=810) ^ref-35102

---
実装上で気をつけること 　ロールプレイングにおけるプロフィールの課題を説明します。 — location: [831](kindle://book?action=open&asin=B0FM3QJ2DP&location=831) ^ref-49724

---
なぜツール呼び出しを行うのでしょうか — location: [880](kindle://book?action=open&asin=B0FM3QJ2DP&location=880) ^ref-46476

---
LLMは述語論理に基づくバイナリコードを明示的に処理しないため、算術演算やアルゴリズムの実行が苦手です。 — location: [887](kindle://book?action=open&asin=B0FM3QJ2DP&location=887) ^ref-33351

---
ツールの設計において気をつけたいこと — location: [893](kindle://book?action=open&asin=B0FM3QJ2DP&location=893) ^ref-25510

---
自己修正に役立つことを期待したいですが、o1-previewでも内在的な自己修正が上手くいかず、過剰な思考によって問題解決が遅れたり、成功していたのが修正でかえって失敗になることが報告されています*56。推論モデルは人間の配慮してほしい範囲を超えて、考えすぎて指摘してしまうようです。また別の課題に事実の無視もあります*57。 — location: [1392](kindle://book?action=open&asin=B0FM3QJ2DP&location=1392) ^ref-42148

---
メモリは、過去の経験や知識を蓄積してAIエージェントの将来の意思決定を支援する役割で、タスクの精度向上やパーソナライズ化に貢献する。 — location: [1416](kindle://book?action=open&asin=B0FM3QJ2DP&location=1416) ^ref-16098

---
Text to SQL — location: [1779](kindle://book?action=open&asin=B0FM3QJ2DP&location=1779) ^ref-51516

---
Plan-and-Execute型エージェントはLLMに直接質問を入力して回答を得るのではなく、図4.3のようにまず問題をいくつかの小さな問題に分割（計画）し、それぞれを個別に解決（行動）していくことで最終的な回答を得る方法です。 — location: [2057](kindle://book?action=open&asin=B0FM3QJ2DP&location=2057) ^ref-55447

---
検索）ツール — location: [2145](kindle://book?action=open&asin=B0FM3QJ2DP&location=2145) ^ref-25536

---
gpt-4以降は入力可能なトークン長が飛躍的に向上し、従来のようにLLMのトークン制約のためにRAGを使うという意味は薄くなってきています。 — location: [2171](kindle://book?action=open&asin=B0FM3QJ2DP&location=2171) ^ref-41367

---
計画不備 — location: [2358](kindle://book?action=open&asin=B0FM3QJ2DP&location=2358) ^ref-60543

---
ドキュメントから必要な情報を漏れなく読み込めているか — location: [2379](kindle://book?action=open&asin=B0FM3QJ2DP&location=2379) ^ref-1323

---
検索インデックスの構築方法やデータの投入方法が適切でないと検索精度が低下します。表4.6では検索インデックスの構築の際のポイント４点を挙げています。 — location: [2388](kindle://book?action=open&asin=B0FM3QJ2DP&location=2388) ^ref-47131

---
仮に検索インデックスが適切に構築されていたとしても、適切な検索結果が得られない場合があります。これにはいくつかの原因があり、それぞれに対する解決策が提案されています。以下の表4.7に検索結果が正しく得られない場合の原因と解決策を示し — location: [2397](kindle://book?action=open&asin=B0FM3QJ2DP&location=2397) ^ref-21162

---
実際には検索インデックスやツール、ワークフローの構築、各ステップのプロンプトなどカスタマイズの余地は多くあります。 — location: [2402](kindle://book?action=open&asin=B0FM3QJ2DP&location=2402) ^ref-13357

---
プロンプトを複雑にして制御しようとすると、汎用性と保守性が低下する傾向があります。 — location: [2407](kindle://book?action=open&asin=B0FM3QJ2DP&location=2407) ^ref-20140

---
参照ドキュメントの運用も極めて重要です。 — location: [2412](kindle://book?action=open&asin=B0FM3QJ2DP&location=2412) ^ref-41349

---
AIエージェントの性能を最大限に引き出すためには、これらの要素を総合的に考慮し、継続的な改善とメンテナンスを行うことが重要です。 — location: [2424](kindle://book?action=open&asin=B0FM3QJ2DP&location=2424) ^ref-40847

---
またMicrosoftからLIDA*2、TaskWeaver*3、Data Formulator*4 などさまざまなオープンソースモデルが公開されています。 — location: [2549](kindle://book?action=open&asin=B0FM3QJ2DP&location=2549) ^ref-62214

---

Azure — location: [2632](kindle://book?action=open&asin=B0FM3QJ2DP&location=2632) ^ref-31529

---
Container Apps Dynamic Sessions 　Azure Container Apps*17 は、コンテナ化されたワークロードを実行できるサーバーレスプラットフォームです。Dynamic Sessionsにより、特定のプログラムをセキュリティで保護されたサンドボックス環境で実行することができます。 Jupyter カーネルゲートウェイ 　Jupyterカーネルへのヘッドレスアクセスを提供するWebサーバで、RESTやWebSocketを介してカーネルと通信し、コードスニペットの実行やカーネルの管理を実現します*18。CodeAct*19 というプロダクトで実際に使用されています。 AutoGen - DockerCommandLineCodeExecutor 　Microsoftが提供するエージェントライブラリであるAutoGenには、受け取ったメッセージを実行し、実行結果とともにメッセージを出力するCode Executorという — location: [2632](kindle://book?action=open&asin=B0FM3QJ2DP&location=2632) ^ref-41961

---
ユーザー要求を解決するためのコードはLLMが生成します（プログラムリスト5.14）。ここでは gpt-4o-mini を指定していますが、最適なモデルを使用されたい場合はChatbot Arena*22 やEvalPlus Leaderboard*23 などのコード生成のベンチマークを参照してください。 — location: [2712](kindle://book?action=open&asin=B0FM3QJ2DP&location=2712) ^ref-8349

---
5.4節ではタスク要求をユーザーから直接入力しました。しかしプログラマーエージェントだけでは「いい感じにデータから示唆を出して」といった抽象的な要求を満たすことは困難です。このような抽象的な指示は、とくにデータ活用の文化が十分に根付いていない現場で多く発生します。 — location: [2785](kindle://book?action=open&asin=B0FM3QJ2DP&location=2785) ^ref-14710

---
そこで2.4節でも説明したように、分析計画を立案することで、問題解決までの長い道のりにサブゴールという中間ポイントを設定します（図5.16）。 — location: [2787](kindle://book?action=open&asin=B0FM3QJ2DP&location=2787) ^ref-47370

---
しかし、担当者自身にそれほど事前知識が無い場合はどうでしょうか。 — location: [2907](kindle://book?action=open&asin=B0FM3QJ2DP&location=2907) ^ref-24325

---
Cohere Rerank API 　Cohere社が提供するCohere Rerank API*4 は、検索結果や候補リストに対してセマンティックな再順位付けを行うためのサービスです。具体的には、入力クエリと複数の候補テキスト間の意味的関連性を評価し、もっとも関連性の高い項目を上位から順に配置することができます。arXiv探索エージェントでは、arXivの検索結果に対してCohere Rerank APIを適用し、検索タスクに対して関連性の高い論文を上位から順に抽出するために利用しています。 — location: [3039](kindle://book?action=open&asin=B0FM3QJ2DP&location=3039) ^ref-38078

---
Jina.ai Reader API 　Jina.ai社が提供するJina.ai Reader API*5 は、Web上のリソースをMarkdown形式のテキストに変換するためのサービスです。Reader APIはarXiv上のPDFファイル — location: [3045](kindle://book?action=open&asin=B0FM3QJ2DP&location=3045) ^ref-53443

---
のMarkdown変換にも対応しているため、arXiv探索エージェントではPDFファイルで与えられる論文の本文をMarkdown形式のテキストに変換するために利用しています。 — location: [3047](kindle://book?action=open&asin=B0FM3QJ2DP&location=3047) ^ref-33836

---
LangGraph Studio — location: [3449](kindle://book?action=open&asin=B0FM3QJ2DP&location=3449) ^ref-44914

---
長期的にはAIエージェントがどれだけ手間を減らしてくれたか、ユーザーが調査結果に満足しているか、といった点を考慮した体験設計が重要です。 　たとえばヒアリングを厳密に行いすぎると対話回数が増えすぎてユーザーがストレスを感じる可能性もあります。一方で、自動的に生成されるゴール設定やタスク分解 — location: [3516](kindle://book?action=open&asin=B0FM3QJ2DP&location=3516) ^ref-11543

---
の結果がユーザーの要望と合わない場合、ユーザーとしてはそれぞれの結果に介入させてほしいと感じるかもしれません。 　AIエージェントがユーザーにどれだけ活用されているのかを追跡できたり、出力結果に対するフィードバックを得られるようにする工夫が、長期的にAIエージェントの質を向上させるために重要だと考えられます。 — location: [3519](kindle://book?action=open&asin=B0FM3QJ2DP&location=3519) ^ref-44294

---
AIエージェントの開発が一通りできたら評価に入ります(図8.1)。本来、評価ではKPI達成度が重要になりますが、 — location: [3868](kindle://book?action=open&asin=B0FM3QJ2DP&location=3868) ^ref-38561

---
ではAIエージェントについて紹介しているため、焦点を絞ります。AIエージェントの評価の観点は２つあります。１つ目がLLMが獲得しているAIエージェント能力の評価です。LLMに計画やツール利用が正しく行えるかを評価します。２つ目はAIエージェントの問題解決能力の評価です。AIエージェントがさまざまな行動をした結果、正しく問題解決できているかを評価します。 — location: [3870](kindle://book?action=open&asin=B0FM3QJ2DP&location=3870) ^ref-48070

---
AIエージェントの能力をPoCで評価するときは、GPT-4oなどの特定モデルで必要な能力を個別に評価し、精度が向上するようにプロンプトチューニングします。そのために能力別で評価用のデータセットを用意します。評価データは、入力と期待する結果のテストケースを用意し、人手で評価することを推奨します。評価件数はまずは数十件程度でもAIエージェントの能力を十分に把握できると思います。具体的な評価指標については8.2節で紹介し — location: [3884](kindle://book?action=open&asin=B0FM3QJ2DP&location=3884) ^ref-8979

---
1. 特定のドメインで特定タスクのみで評価（Distribution-specific） 　AIのPoCは基本的にこのケースが多いです。 特定の想定した範囲で想定タスクを解く 設定です。たとえば、自社のECサイトのナビゲーションをタスクとするのであれば、ホーム画面から商品購入まで導けるか、ホーム画面から購入履歴の確認までできるかを評価します。他社のECサイトでうまくいくかは興味の範囲外という設定です。評価するときは、AIエージェントのチューニングに使用したデータと似たようなデータで取り組みます。 — location: [3905](kindle://book?action=open&asin=B0FM3QJ2DP&location=3905) ^ref-54454

---
2. 汎用ドメインで特定タスクで評価（Task-specific） 　特化型のAIサービスとして売り出す場合に該当します。よくある製品で言えば、議事録作成サービスとか、社内ドキュメントの質問応答サービスが該当します。これらは、 タスクを固定し、まったく異なる顧客データでも使えるように汎用的に作り込みます。たとえば、ECサイトのナビゲーションでは別のECサイトでもうまくいくことを保証するようにさまざまなサイトで評価します。さらにドメインの汎用性を広げるならECサイトに限らず、ホテルや自治体のホームページのナビゲーションができるか評価するというものです。特定のタスクは一つである必要はありません。想定したタスクができることが重要で、複数のタスクがあっても構いません。評価するときは、チューニングしたのが社内のデータであれば異なる顧客のデータ（未知のドメイン）で評価します。 — location: [3911](kindle://book?action=open&asin=B0FM3QJ2DP&location=3911) ^ref-53811

---
評価指標 — location: [3938](kindle://book?action=open&asin=B0FM3QJ2DP&location=3938) ^ref-24721

---
■ 計画の妥当性 　AIエージェントの計画が人間の考える行動計画と一致するか評価します。計画は行動を始める前の事前計画と行動しながらの逐次計画と２種類あります。事前計画は正解データと見比べ、逐次計画の場合、実行履歴から計画を再構成して比較します。人間が見比べるのが厳しい場合、LLMに正解データを渡して比較させます。 ■ 自己修正率 　AIエージェントが自己の誤りを修正できるか適応力を評価します。具体的には、人工的にエラーシナリオを作り、エラー結果をAIエージェントに渡し、その結果を修正できるかで評価します。たとえば、コード生成ならコンパイルエラー、実行時エラー、不正解の出力をAIエージェントに返してリトライさせます。ツール利用やコード生成で試されることが多いです。リトライを５回まで行い、各回ごとの精度を見比べることもあります。２回目で成功することもあれば、５回目で成功することもあるでしょう。 ■ ツール利用の正解率 　AIエージェントがツールを使用するか判断をして、正しいツールを選び、ツールのパラメータを生成できるかを評価します。正しくツールが選ばれても、ツールのパラメータを間違うと使用できません。評価では無関係なツールが多く、選択肢に最適なツールがない場合、多くのツールから似たツールを正しく選べるかを評価することもあります。 ■ マルチエージェントの貢献度 　マルチエージェントのうち、どの役割が成果物の品質、精度向上や安定性に寄与したかを評価します。全役割がいる場合の成果物と各役割を除いた場合の成果物を比較することで各エージェントの効果を分析します。 8.2.2 　問題解決能力に関する指標 ■ タスクの成功率 　一番シンプルな方法で、期待する結果とAIエージェントの出力が一致するかでタスクの成功数の割合を計算します。０～100%で表します。期待する… — location: [3943](kindle://book?action=open&asin=B0FM3QJ2DP&location=3943) ^ref-6308

---

評価の準備 — location: [3993](kindle://book?action=open&asin=B0FM3QJ2DP&location=3993) ^ref-21179

---
1. 評価指標の選択 　取り組む内容に基づき、何を評価すべきかを決定します。安全性が求められる場合はタスクの成功率だけでなく、リスク回避を測ることもあります。ユーザーを気にかける場合は、ユーザー満足度やタスク完了時間を指標に入れると思います。 2. 評価データの用意 　プロジェクトに合わせて評価データを用意します。いきなり評価自動化のコードを書くよりは、Excelでもいいのでテストケースを10件程度作ることを推奨します。 — location: [3999](kindle://book?action=open&asin=B0FM3QJ2DP&location=3999) ^ref-27516

---
まずは確実にAIエージェントの一挙手一投足を確認します。そうすることでAIエージェントの癖やプロンプト改善の方向性が見えてきます。いきなり自動化コードを作って数値だけを追い求めても精度改善の方向性が見えてこないことがあります。 — location: [4004](kindle://book?action=open&asin=B0FM3QJ2DP&location=4004) ^ref-51739

---
理想を言えば、正常系と異常系の網羅性のある評価データを用意することが望ましいです。 — location: [4007](kindle://book?action=open&asin=B0FM3QJ2DP&location=4007) ^ref-6457

---
しかし、AIエージェントの評価が顧客にしかできないことがあります。評価者も人間のため、評価する内容が多いと疲れてしまい、いい加減になってしまう恐れがあります。また、大勢に分散させて評価させると評価基準が人単位でブレることがあります。評価者の負担には気を配り、お互いの信頼関係が生まれるまでは最低限の評価データを準備しましょう。 — location: [4008](kindle://book?action=open&asin=B0FM3QJ2DP&location=4008) ^ref-25025

---
ここでは評価フォーマットの例として、分かりやすく家事代行エージェントの — location: [4011](kindle://book?action=open&asin=B0FM3QJ2DP&location=4011) ^ref-56026

---
問題の制約条件の数 — location: [4040](kindle://book?action=open&asin=B0FM3QJ2DP&location=4040) ^ref-39228

---
4. トレースの準備 — location: [4046](kindle://book?action=open&asin=B0FM3QJ2DP&location=4046) ^ref-45081

---
5. エラー条件の設定 — location: [4049](kindle://book?action=open&asin=B0FM3QJ2DP&location=4049) ^ref-25799

---
6. 比較評価 — location: [4056](kindle://book?action=open&asin=B0FM3QJ2DP&location=4056) ^ref-6982

---
LLM-as-a-Judge — location: [4066](kindle://book?action=open&asin=B0FM3QJ2DP&location=4066) ^ref-51989

---
業務で使用する場合 — location: [4094](kindle://book?action=open&asin=B0FM3QJ2DP&location=4094) ^ref-32517

---
よくある計画・推論に関するエラー — location: [4117](kindle://book?action=open&asin=B0FM3QJ2DP&location=4117) ^ref-4069

---
知識・情報の不足 — location: [4126](kindle://book?action=open&asin=B0FM3QJ2DP&location=4126) ^ref-52794

---
エラーからの自己修正の失敗 — location: [4133](kindle://book?action=open&asin=B0FM3QJ2DP&location=4133) ^ref-2195

---
よくある行動・実行に関するエラー — location: [4147](kindle://book?action=open&asin=B0FM3QJ2DP&location=4147) ^ref-8883

---
よくある環境・知覚に関するエラー — location: [4182](kindle://book?action=open&asin=B0FM3QJ2DP&location=4182) ^ref-23768

---
